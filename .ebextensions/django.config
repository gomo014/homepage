container_commands:
  01_collectstatic:
    command: "source /var/app/venv/*/bin/activate && python3 manage.py collectstatic --noinput"

files:
  "/etc/nginx/conf.d/static.conf":
    mode: "000644"
    owner: root
    group: root
    content: |
      location /static/ {
          alias /var/app/current/staticfiles/;
      }

option_settings:
  aws:elasticbeanstalk:container:python:
    WSGIPath: myproject.wsgi:application
  aws:elasticbeanstalk:container:python:staticfiles:
    "/static/": "staticfiles/"

commands:
  restart_nginx:
    command: "sudo service nginx restart"
